---
layout: post
title: "[Docker] Container ğŸ‹"
date: 2023-03-16 12:41:00 +09:00
categories: [Docker, container]
tags: [Docker]
comments: true
---

![Untitled](../../../assets/img/posts/docker/docker_container/docker_conatiner.png)

## Containerë€?

SoftwareëŠ” OSì™€ libraryì˜ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤. í•˜ë‚˜ì˜ ì»´í“¨í„°ì—ì„œ ì„±ê²©ì´ ë‹¤ë¥¸ softwareë¥¼ ì‹¤í–‰í•  ë•Œ í˜¸í™˜ ë¬¸ì œ ë° ì–´ë ¤ì›€ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° ê´€ë ¨ëœ í™˜ê²½êµ¬ì„± ë° ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤.

ContainerëŠ” ê° softwareì˜ ì‹¤í–‰ì— í•„ìš”í•œ í™˜ê²½ì„ ë…ë¦½ì ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ê¸°ì´ˆ í™˜ê²½ ë˜ëŠ” ë‹¤ë¥¸ ì‹¤í–‰ í™˜ê²½ê³¼ì˜ ì¶©ëŒì„ ë§‰ê³  ì‹¤í–‰ì˜ ë…ë¦½ì„±ì„ í™•ë³´í•´ì£¼ëŠ” OS ìˆ˜ì¤€ì˜ ê²©ë¦¬ ê¸°ìˆ ì„ ë§í•œë‹¤. ContainerëŠ” applicationì˜ ì‹¤ì œ êµ¬ë™ í™˜ê²½ìœ¼ë¡œë¶€í„° ì¶”ìƒí™” ë° ì½”ë“œì™€ ëª¨ë“  ì¢…ì†ì„±ì„ ê°€ì§„ ê²ƒì„ íŒ¨í‚¤ì§• í•  ìˆ˜ ìˆëŠ” softwareì˜ í‘œì¤€ ë‹¨ìœ„ ì…ë‹ˆë‹¤.

ContainerëŠ” ê°€ìƒí™” ê¸°ìˆ  ì¤‘ í•˜ë‚˜ë¡œ ëŒ€í‘œì ìœ¼ë¡œ Linux Containerê°€ ìˆë‹¤. ê¸°ì¡´ OSë¥¼ ê°€ìƒí™” ì‹œí‚¤ë˜ ê²ƒê³¼ ë‹¬ë¦¬ **ContainerëŠ” OSë ˆë²¨ì˜ ê°€ìƒí™”ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê²©ë¦¬ì‹œì¼œ ë™ì‘í•˜ëŠ” ë°©ì‹ì´ë‹¤.**

## VM vs Container

![Untitled](https://blog.kakaocdn.net/dn/JloLY/btq7WUSbsmn/uVtXFK1zOz2FRKuFNNJdQk/img.jpg){: width="100%"}

VMì€ Host OS ìœ„ì— ê°€ìƒí™”ë¥¼ ì‹œí‚¤ê¸° ìœ„í•œ **Hypervisor**ì—”ì§„ì„ ì´ìš©í•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ OSë¥¼ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì—ì„œ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ **ê°€ìƒí™”ëœ í•˜ë“œì›¨ì–´ ìœ„ì— OSê°€ ì˜¬ë¼ê°€ëŠ” í˜•íƒœë¡œ ê±°ì˜ ì™„ë²½í•˜ê²Œ Hostì™€ ë¶„ë¦¬ëœë‹¤.**

*ì—¬ê¸°ì„œ **HyperVisor**ëŠ” ê° Guest OSì—ê²Œ Hostì˜ ìì›ì„ ê°ê° ë¶„ë°°ë¥¼ í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.*

Hypervisorë¥¼ ì´ìš©í•œ ê°€ìƒí™”ë¥¼ ë³´ë©´ Host OSì™€ ì™„ì „íˆ ë¶„ë¦¬ë˜ëŠ” ì¥ì ì€ ìˆì§€ë§Œ OSìœ„ì— OSë¥¼ ì˜¬ë¦¬ê¸° ë•Œë¬¸ì— ë¬´ê²ê³  ëŠë¦´ìˆ˜ ë°–ì— ì—†ëŠ” êµ¬ì¡°ë‹¤.

ë˜í•œ ë…ë¦½ì ì¸ í”Œë«í¼ì„ ê°€ì§€ê¸° ìœ„í•´ì„œëŠ” í•˜ë‚˜ì”© ì¦ê°€ë¥¼ ì‹œì¼œì•¼í•˜ê³  ë¶ˆí•„ìš”í•œ OSë¥¼ ë§Œë“œëŠ” ì‘ì—…ì„ ê³„ì† ì§„í–‰ í•´ì•¼ëœë‹¤. 

ì—¬ê¸°ì„œ OSë§Œ ì˜¬ë¼ê°€ëŠ” ê²Œ ì•„ë‹Œ Guest OSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ library, kernelë“± ì „ë¶€ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ì´ ê°€ìƒë¨¸ì‹ ì„ ë‹¤ë¥¸ í™˜ê²½ì— ë°°í¬í•˜ê¸° ìœ„í•´ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì—ˆì„ ë•Œ ì´ ì´ë¯¸ì§€ ìš©ëŸ‰ ë˜í•œ ì»¤ì§€ê²Œ ëœë‹¤.

ì¦‰, ê°€ìƒ ë¨¸ì‹ ì€ ì™„ë²½í•œ OSë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì€ ìˆì§€ë§Œ ì¼ë°˜ Hostì— ë¹„í•´ ì„±ëŠ¥ ì†ì‹¤ì´ ìˆìœ¼ë©° ìˆ˜ ê¸°ê°€ë°”ì´íŠ¸ì— ë‹¬í•˜ëŠ” ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ applicationìœ¼ë¡œ ë°°í¬í•˜ê¸°ëŠ” ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

#### **ë°˜ë©´**

ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™”ëŠ” Docker ì—”ì§„ ìœ„ì— application ì‹¤í–‰ì— í•„ìš”í•œ binaryë§Œ ì˜¬ë¼ê°„ë‹¤.

ë˜í•œ í•˜ë‚˜ì˜ ì„œë²„ì— ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

ì´ ë•Œ DockerëŠ” containerë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ Linux ë‚´ì¥ ê¸°ëŠ¥ì¸ **chroot**, **namespace**, **cgroup**ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„ë¡œ ê²©ë¦¬ í™˜ê²½ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì†ì‹¤ì´ ê±°ì˜ ì—†ë‹¤ê³  ë´ë„ ë¬´ë°©í•˜ë‹¤.

ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™”ëŠ” Host OS ê·¸ë¦¬ê³  Docker ì—”ì§„ìœ„ì—ì„œ ë°”ë¡œ ë™ì‘í•˜ë©° Host OSì™€ ì»¤ë„ì„ ê³µìœ í•˜ë©° ì»¤ë„ì„ ê³µìœ í•˜ê²Œ ë˜ë©´ **I/O(input/output)ì²˜ë¦¬ê°€ ì‰½ê²Œ ë˜ì–´ ì„±ëŠ¥ì˜ íš¨ìœ¨ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤**.

ì»¨í…Œì´ë„ˆì— í•„ìš”í•œ ì»¤ë„ì€ í˜¸ìŠ¤íŠ¸ì˜ ì»¤ë„ì„ ê³µìœ í•´ ì‚¬ìš©í•˜ê³ , ì»¨í…Œì´ë„ˆ ì•ˆì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë„í•˜ëŠ” ë° í•„ìš”í•œ library, binrary ë° ì‹¤í–‰ íŒŒì¼ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆë¥¼ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì—ˆì„ ë•Œ ì´ë¯¸ì§€ì˜ ìš©ëŸ‰ ë˜í•œ ê°€ìƒ ë¨¸ì‹ ì— ë¹„í•´ ì™„ì „íˆ ì¤„ì–´ë“­ë‹ˆë‹¤.

ê°„ëµíˆ,
ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê°€ìƒë¨¸ì‹ ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Host OSê°€ ì‚¬ìš©í•˜ëŠ” ìì›ì„ ë¶„ë¦¬í•˜ì—¬ ì—¬ëŸ¬ í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.

## Make nginx container

ê°„ë‹¨í•˜ê²Œ nginx ì›¹ì„œë²„ë¥¼ êµ¬ë™ ì‹œì¼œë³´ì

![Untitled](../../../assets/img/posts/docker/docker_container/nginx.png)
_êµ¬ì¡°ëŠ” ìš”ë ‡ê²Œ Host 80ë²ˆ portì— ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  íŠ¸ë˜í”½ì€ Nginx containerì˜ 80ë²ˆ portë¡œ ì „ë‹¬í•œë‹¤._

### Nginx image ë‹¤ìš´ë¡œë“œ

```bash
docker pull nginx

# nginx ìµœì‹  ë²„ì „ pull
docker pull nginx:latest

# nginx ë²„ì „ ëª…ì‹œ pull
docker pull nginx:1.16.1
```

![Untitled](../../../assets/img/posts/docker/docker_container/nginx-pull.png)
_"docker pull nginx" ì…ë ¥_

### ì´ë¯¸ì§€ ì¡°íšŒ

```shell
docker image ls -a
```
![Untitled](../../../assets/img/posts/docker/docker_container/docker_image_ls.png)
_Pull ë°›ì•˜ë˜ nginxê°€ ë³´ì¸ë‹¤_

### Container ìƒì„±
```shell
docker run -d --name nginx -p 80:80 nginx
# docker run -d --name {Container name} -p {host port}:{container port} {image name}
```

> run : Container ìƒì„± ëª…ë ¹ì–´.
>
> -d : Container ìƒì„± ì‹œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ëŠ” ì˜µì…˜.
>
> --name : Containerì˜ ì´ë¦„ ì§€ì • ì˜µì…˜. (ë¯¸ì…ë ¥ ì‹œ ì´ë¦„ì€ ë¬´ì‘ìœ„)
>
> -p : host port numberì™€ conatiner ë‚´ë¶€ portë¥¼ í¬ì›Œë”© í•´ì£¼ëŠ” ì˜µì…˜ ("host":"docker container")

![Untitled](../../../assets/img/posts/docker/docker_container/docker_run.png)
_ì´ìƒí•œ ë¬¸êµ¬ ë‚˜ì˜¤ë©´ ì„±ê³µ_

### Container ì¡°íšŒ
```shell
# í˜„ì¬ ì‹¤í–‰ ë˜ê³  ìˆëŠ” container ì¡°íšŒ
docker ps

# ëª¨ë“  Container ì¡°íšŒ
docker ps -a
```
![Untitled](../../../assets/img/posts/docker/docker_container/docker_ps.png)
_ì•„ê¹Œ ì˜¬ë¦° nginxê°€ ë³´ì¸ë‹¤_


### ê²°ê³¼ í™•ì¸
ì£¼ì†Œì°½ì— [localhost](http://localhost "localhost")ë¡œ ì…ë ¥. 
_(web server ê¸°ë³¸ port ë²ˆí˜¸ ì¸ 80ì„ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— port ë²ˆí˜¸ëŠ” ìƒëµ)_

![Untitled](../../../assets/img/posts/docker/docker_container/nginx_home.png)

ìœ„ ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¤ë©´ ì»¨í…Œì´ë„ˆ ìƒì„± ì™„ë£Œ!
